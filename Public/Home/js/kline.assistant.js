function Kline(){}Kline.prototype={browerState:0,klineWebsocket:null,klineTradeInit:false,tradeDate:new Date(),tradesLimit:100,lastDepth:null,depthShowSize:15,priceDecimalDigits:6,amountDecimalDigits:4,symbol:null,curPrice:null,title:"",reset:function(b){this.refreshUrl(b);this.symbol=b;this.lastDepth=null;this.curPrice=null;this.klineTradeInit=false;$("#gasks .table").empty();$("#gbids .table").empty();$("#asks .table").empty();$("#bids .table").empty();this.websocketRedister(b)},setTitle:function(){document.title=(this.curPrice==null?"":this.curPrice+" ")+this.title},dateFormatTf:function(b){return(b<10?"0":"")+b},dateFormat:function(b){return b.getFullYear()+"-"+this.dateFormatTf(b.getMonth()+1)+"-"+this.dateFormatTf(b.getDate())+" "+this.dateFormatTf(b.getHours())+":"+this.dateFormatTf(b.getMinutes())+":"+this.dateFormatTf(b.getSeconds())},dateInit:function(d){var e=new Date();if(d){e.setTime(d)}$(".m_rightbot").text(this.dateFormat(e));var f=this;setInterval(function(){e.setTime(e.getTime()+1000);$(".m_rightbot").text(f.dateFormat(e))},1000)},websocketRedister:function(b){this.updateDepth();var c=this;var a='{"asks":[[18580,0.055109],[18520,0.8982],[18500,5.802874],[18499.9,0.005422],[18499,5],[18490,0.008221],[18475.5,0.003233],[18425.3,0.002434],[18401.4,0.000136],[18399.9,0.005451],[18366.1,0.527979],[18366,0.065427],[18298,0.045],[18297.9,8.196],[18288,1.023276],[18266,0.277472],[18256.4,0.003269],[18199.9,0.005511],[18198.8,0.440183],[18198,0.165414],[18196,0.758338],[18188,0.996],[18187,1.61925],[18185,2.098884],[18120,0.000698],[18118,0.1996],[18117,1],[18115.5,0.110451],[18115,0.907724],[18114.8,0.579]],"bids":[[17905.5,0.34],[17905.3,0.11196],[17905,0.56],[17901.8,8.197],[17901.5,1.7965],[17901.2,1],[17901,0.203545],[17900,0.34264],[17881.1,0.418736],[17865,0.385071],[17862,0.1],[17857.6,0.00014],[17826.8,0.520464],[17811,0.07],[17810.1,0.035001],[17809.2,0.00332],[17808,0.299701],[17801,1],[17800,1.248358],[17730.2,1],[17729.8,0.167771],[17711,0.08],[17700,0.00565],[17679,0.15198],[17658,0.033],[17648.8,0.319029],[17611,0.09],[17600,2.310682],[17597.2,0.003351],[17580,0.309805]]}';var d=JSON.parse(a);c.updateDepth(d)},pushTrades:function(a){},updateDepth:function(l){window._set_current_depth(l);if(!l){return}$("#gasks .table").html(this.getgview(this.getgasks(l.asks)));$("#gbids .table").html(this.getgview(this.getgbids(l.bids)));if(this.lastDepth==null){this.lastDepth={};this.lastDepth.asks=this.getAsks(l.asks,this.depthShowSize);this.depthInit(this.lastDepth.asks,$("#asks .table"));this.lastDepth.bids=this.getBids(l.bids,this.depthShowSize);this.depthInit(this.lastDepth.bids,$("#bids .table"))}else{var h=$("#asks .table");h.find("div.remove").remove();h.find("div.add").removeClass("add");var k=this.getAsks(l.asks,this.depthShowSize);var i=this.lastDepth.asks;this.lastDepth.asks=k;this.asksAndBids(k.slice(0),i,h);var m=$("#bids .table");m.find("div.remove").remove();m.find("div.add").removeClass("add");var j=this.getBids(l.bids,this.depthShowSize);var n=this.lastDepth.bids;this.lastDepth.bids=j;this.asksAndBids(j.slice(0),n,$("#bids .table"))}},depthInit:function(m,k){k.empty();if(m&&m.length>0){var l,i="";for(var n=0;n<m.length;n++){var j=(m[n][0]+"").split(".");var o=this.getPrice(j,l);l=j[0];j=(m[n][1]+"").split(".");var p=this.getAmount(j);i+="<div class='row'><span class='price'>"+o[0]+"<g>"+o[1]+"</g></span> <span class='amount'>"+p[0]+"<g>"+p[1]+"</g></span></div>"}k.append(i);i=null}},asksAndBids:function(y,x,q){for(var u=0;u<x.length;u++){var j=false;for(var w=0;w<y.length;w++){if(x[u][0]==y[w][0]){j=true;if(x[u][1]!=y[w][1]){var z=q.find("div:eq("+u+") .amount");z.addClass(x[u][1]>y[w][1]?"red":"green");var t=this.getAmount((y[w][1]+"").split("."));setTimeout((function(a,b){return function(){a.html(b[0]+"<g>"+b[1]+"</g>");a.removeClass("red").removeClass("green");a=null;b=null}})(z,t),500)}y.splice(w,1);break}}if(!j){q.find("div:eq("+u+")").addClass("remove");x[u][2]=-1}}for(var w=0;w<x.length;w++){for(var u=0;u<y.length;u++){if(y[u][0]>x[w][0]){var r=(y[u][1]+"").split(".");var t=this.getAmount(r);q.find("div:eq("+w+")").before("<div class='row add'><span class='price'></span> <span class='amount'>"+t[0]+"<g>"+t[1]+"</g></span></div>");x.splice(w,0,y[u]);y.splice(u,1);break}}}var s="";for(var u=0;u<y.length;u++){x.push(y[u]);var r=(y[u][1]+"").split(".");var t=this.getAmount(r);s+="<div class='row add'><span class='price'></span> <span class='amount'>"+t[0]+"<g>"+t[1]+"</g></span></div>"}if(s.length>0){q.append(s)}s=null;var p;for(var u=0;u<x.length;u++){var i=q.find("div:eq("+u+")");if(!(x[u].length>=3&&x[u][2]==-1)){var r=(x[u][0]+"").split(".");var v=this.getPrice(r,p);p=r[0];i.find(".price").html(v[0]+"<g>"+v[1]+"</g>")}}y=null;x=null;q.find("div.add").slideDown(800);setTimeout((function(b,a){return function(){b.slideUp(500,function(){$(this).remove()});a.removeClass("add")}})(q.find("div.remove"),q.find("div.add")),1000)},getAsks:function(c,d){if(c.length>d){c.splice(0,c.length-d)}return c},getBids:function(c,d){if(c.length>d){c.splice(d,c.length-1)}return c},getgview:function(j){var i="";var h;for(var f=0;f<j.length;f++){var g=j[f][0].split(".");if(g.length==1||g[0]!=h){i+="<div class='row'><span class='price'>"+j[f][0]+"</span> <span class='amount'>"+j[f][1]+"</span></div>";h=g[0]}else{i+="<div class='row'><span class='price'><h>"+g[0]+".</h>"+g[1]+"</span> <span class='amount'>"+j[f][1]+"</span></div>"}}return i},getgasks:function(l){var i=l[l.length-1][0];var p=l[0][0];var t=p-i;var q=this.getBlock(t,100);var s=Math.abs(Number(Math.log(q)/Math.log(10))).toFixed(0);if(t/q<2){q=q/2;s++}if(q>=1){(s=0)}i=parseInt(i/q)*q;p=parseInt(p/q)*q;var m=[];var n=0;for(var o=l.length-1;o>=0;o--){if(l[o][0]>i){var r=parseInt(n,10);if(r>0){m.unshift([Number(i).toFixed(s),r])}if(i>=p){break}i+=q}n+=l[o][1]}return m},getgbids:function(l){var i=l[l.length-1][0];var p=l[0][0];var t=p-i;var q=this.getBlock(t,100);var s=Math.abs(Number(Math.log(q)/Math.log(10))).toFixed(0);if(t/q<2){q=q/2;s++}if(q>=1){(s=0)}i=parseInt(i/q)*q;p=parseInt(p/q)*q;var m=[];var n=0;for(var o=0;o<l.length;o++){if(l[o][0]<p){var r=parseInt(n,10);if(r>0){m.push([Number(p).toFixed(s),r])}if(p<=i){break}p-=q}n+=l[o][1]}return m},getBlock:function(b,d){if(b>d){return d}else{d=d/10;return this.getBlock(b,d)}},getZeros:function(c){var d="";while(c>0){c--;d+="0"}return d},getPrice:function(f,g){var h=f[0];if(g==h){h="<h>"+h+".</h>"}else{h+="."}var e="";if(f.length==1){h+="0";e=this.getZeros(this.priceDecimalDigits-1)}else{h+=f[1];e=this.getZeros(this.priceDecimalDigits-f[1].length)}return[h,e]},getAmount:function(f){var h=f[0];var e="";var g=this.amountDecimalDigits-h.length+1;if(g>0){e=".";if(f.length==1){e+=this.getZeros(g)}else{if(g>f[1].length){e+=f[1]+this.getZeros(g-f[1].length)}else{if(g==f[1].length){e+=f[1]}else{e+=f[1].substring(0,g)}}}}return[h,e]},setTopTickers:function(a){},setMarketShow:function(f,a,g,h){},refreshPage:function(b){},refreshUrl:function(b){}};